<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Custom Selection Menu</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      margin-bottom: 20px;
    }

    p {
      margin-bottom: 15px;
    }

    #selectionMenu {
      position: absolute;
      display: none;
      background: #333;
      color: white;
      border-radius: 6px;
      padding: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    #selectionMenu button {
      background: transparent;
      border: none;
      color: white;
      padding: 8px 12px;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
      margin: 0 2px;
    }

    #selectionMenu button:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <h1>Custom Selection Menu Demo</h1>
  
  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
  
  <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
  
  <p>Select any text on this page to see the custom menu appear. Try it on both desktop and mobile devices!</p>

  <div id="selectionMenu">
    <button id="copyBtn">Copy</button>
    <button id="shareBtn">Share</button>
    <button id="searchBtn">Translate</button>
  </div>

  <script>
    const menu = document.getElementById('selectionMenu');
    const copyBtn = document.getElementById('copyBtn');
    const shareBtn = document.getElementById('shareBtn');
    const searchBtn = document.getElementById('searchBtn');
    
    let selectedText = '';

    // Disable right-click menu
    document.addEventListener('contextmenu', (e) => {
      e.preventDefault();
    });

    // Show menu on text selection
    function showMenu() {
      const selection = window.getSelection();
      selectedText = selection.toString().trim();
      
      if (selectedText.length > 0) {
        const range = selection.getRangeAt(0);
        const rect = range.getBoundingClientRect();
        
        // Position menu above selection
        menu.style.left = rect.left + (rect.width / 2) - (menu.offsetWidth / 2) + window.scrollX + 'px';
        menu.style.top = rect.top + window.scrollY - menu.offsetHeight - 10 + 'px';
        menu.style.display = 'block';
      } else {
        menu.style.display = 'none';
      }
    }

    // Hide menu when clicking outside
    function hideMenu() {
      menu.style.display = 'none';
    }

    // Desktop: mouse selection
    document.addEventListener('mouseup', (e) => {
      if (!menu.contains(e.target)) {
        setTimeout(showMenu, 10);
      }
    });

    // Mobile: touch selection
    document.addEventListener('selectionchange', () => {
      setTimeout(showMenu, 10);
    });

    // Hide menu on click outside
    document.addEventListener('mousedown', (e) => {
      if (!menu.contains(e.target)) {
        setTimeout(hideMenu, 100);
      }
    });

    // Copy action
    copyBtn.addEventListener('click', () => {
      navigator.clipboard.writeText(selectedText).then(() => {
        alert('Copied: ' + selectedText);
        hideMenu();
      });
    });

    // Share action
    shareBtn.addEventListener('click', () => {
      alert('Share: ' + selectedText);
      hideMenu();
    });

    // Search action
    searchBtn.addEventListener('click', () => {
      window.open('https://www.google.com/search?q=' + encodeURIComponent(selectedText), '_blank');
      hideMenu();
    });
  </script>
</body>
</html>
